20181107 教育内容

10:00-

## 復習／質問

### Unix

- 名前がドットから始まるものは隠し属性（ファイルやディレクトリ）

### Qiita アクセス解析

- Google Analytics
	- https://analytics.google.com/
    - アクセス数の多い記事やその日あったアクセスの記事に手を加えていく
        - アクセスルートや遷移から、訪問ユーザーが**何を求めているのか**を探る

### Git

- Clone/Fork 違い
    - リモート／ローカルの違い
        - リモート：GitHub など Git サーバーからロカールに Clone した**サーバー側のリポジトリ**
        - ローカル：自マシンに Clone したリポジトリ
        - ローカル内ではリポジトリを Clone できない
            - Git コマンド自体がサーバー機能を持っていないため
            - 要 Git サーバー（10/07 講義参照）では可能（Fork）
    - clone
        - リモートからローカルにリポジトリを複製すること or 複製したリポジトリ
    - fork
        - GitHub のサーバー内で、アカウント間でリポジトリを clone すること or したもの
        - Clone の一種（GitHub 専門用語/Git 用語ではない）

- origin/upstream の違い
    - origin
        - 起源/ルーツ/元となるもの
        - ローカルから見たリモートのリポジトリのこと
    - upstream
        - 上流/本流/源流/流れの元になるもの/本家
        - リモートから見た Clone 元のリポジトリのこと（GitHub の場合 Fork 元）
        - ローカルに Git サーバーを建ている人が複数人いた場合などで、Clone しあったりすると出てくる
        - コミット時にブランチ気をつけないと本家のブランチをいじることになる
            - upstream をいじるなと言うことではない（運用の仕方の問題）

### train_Muscle で改善したこと

- 実施日／予定日に曜日が表示されるようにした
    - コミットID 2505cae @ Develop ブランチ

---

## GitHub のリンク機能

トレース（なぞる／追跡）時に便利。

- Commit ID（7 桁 or 40 桁）
    - Issue などに Commit ID を記載すると、該当コミットにリンクしてくれる
- Issue ID（# 付きの番号）
    - 他の Issue、コミット、PR などのコメントに記載するとリンクしてくれる
- コミットしたソースコードを開き、概要する行を選択すると、URL リンクに選択行が反映される
    - コードレビューなどで「この箇所を」といった説明に有効（「どこそこのコミットの x ページの y行目」といった説明がいらない）


## Python3, PHP7 の速度

- Python3 や PHP7 は一度実行すると中間言語ファイル（仮処理する）を作成することで（コンパイル含めた）実行速度を速めている。
    - ∴ キャッシュディレクトリが作成される

## ディレクトリのリンクファイル（シンボリックリンク）

- Mac: エイリアス、Win: ショートカットのようなもの
- リンクファイルとも言う
    - ハードリンク
        - 一つのファイルに複数の扉を持たせるイメージ
        - 観音開きの棚に隠し扉を用意するイメージ
        - ディレクトリとして扱いたい場合
            - ディレクトリの総ファイル数にも影響する
    - シンボリックリンク（ソフトリンク）
        - 開かない扉に、「こちらですよ」と行き先の張り紙があるイメージ
        - ベットの下に「観音開きの棚の中」という紙を置いておくイメージ
        - エイリアス
            - 実態につながるヒントのようなもの。接点。
            - コマンドエイリアス
                - 長ったらしいコマンドを１つにする、など
        - 簡易アクセス
            - 容量は影響しない（リンクファイルのみ）
- UNIX コマンド
    - ハードリンクの構文：ln <リンク元ファイル名> <リンク先ファイル名>
    - シンボリックリンクの構文：ln -s <リンク元ファイル名> <リンク先ファイル名>

- Windows 側の GitHub Clone リポジトリ用ディレクトリを Ubuntu のユーザーディレクトリにエイリアスを張る
    - "/mnt/c/lamplus/...." → "~/github"

## バイナリの復習

- PC上のデータは全てバイナリ（ 0 or 1）のデータである
- '00100..' だと見辛い（多すぎる）ので HEX で見る
- HEX の数値だと把握しづらいので ASCII コード表を例に表示する
    - 制御文字は "." で表示される
- Unicode（UTF-8）は 3 バイト（FF FF FF）で表現される
- 改行コードは LF, CR の２種類
    - 10月23日の講義参照
- プリンタドライバ
    - 印刷データはプリンタ言語（PDL）に変換されたバイナリデータ
        - プリンタドライバはある種のコンパイラーのようなもの
        - Win の場合、ドライバでポートを FILE にすると印刷データのバイナリを取得できる
            - このファイルをプリンタに投げるとアプリを通さず印刷できる（コンパイル済みのため）
    - HEX データをみてプリンタの仕様書と見比べてデータ破損を調べたりする
- テキストもバイナリである
    - 拡張子で何で開くか判断している
    - Shebang（#!）があった場合何で起動するか判断している

## Shebang の汎用的記述

- 通常の Bash の Shebang
    -` #!/bin/bash`
- 通常の Python の Shebang
    - 探し方
        - `$ which python3`
    - `#!/usr/bin/python3`
- 問題は $PATH （環境変数）の内容によったりするので、必ず同じパスとは限らない
    - `#!which python3` 的な書き方はできないか
    - `/usr/bin` に `env`  コマンドがある
        - `/usr/bin/env --help` で詳細確認
            - （$PATH含む）環境変数の操作をするコマンド
        - `which` -> `env` で同じことができる
        - ∴ ` #!/usr/bin/env python3`

- 逆に言うと
    - $PATH の通っていないディレクトリにインストールされている場合は実行できない
    - 複数バージョンで試したい人

    ```
    cd /myPython/v3.1/dir
    ./python3 sample.py

    /myPython/v3.1/dir/python3 sample.py
    ```

## シェル

- bash
- DOS
    - Windows 10 にも現存している
        - ブートディスクを作ると DOS が書き込まれる
    - Windows 10 でも DOS の下位互換を持っている
        - Windows の PowerShell でも DOS は動く
        - CON, PRN, AUX などの予約ファイルがいまでも存在するのは下位互換のため
            - CONCON問題


## 環境変数の複数

- $PATH = 環境変数に限らない
    - 環境変数の１つに PATH 変数があるだけ
    - `printenv` コマンド（`/usr/bin/printenv`）で変数を確認できる

- 環境変数はプログラムから取得できる
- ユーザーごとに設定できる
- どこのディレクトリにいても取得できる変数
    - ∴ 環境変数

- 各環境変数は改行区切り

## $PATH の記述について

- 変数 PATH 内の各ディレクトリ（パス）の区切り
    - ":"
- 先に指定されたパスが優先
    - ∴ 先にヒットしたディレクトリ内にあるコマンド／プログラムが使われる
- 定義場所
    - ホームにシェルの隠しファイルとして保存されている（Unix系の場合）
        - ファイル名はシェルの種類による
    - bash の読み込み順
        1. `~/.profile`
        2. `~/.bashrc`
        3. `~/.bash_profile`  → ここにユーザーごとのパスを記述する

- パスの追加方法

```bash
export <環境変数名>=<環境変数名>:<追加したい項目>
```
```sh-session
$ export PATH=$PATH:~/GitHub/bin
$ export PATH=~/bin:$PATH
```

## Git

- コミット時にリポジトリに含めないファイルやディレクトリを指定する
    - `.gitignore` ファイル
        - 除外リスト
        - `.gitignore`  のある階層がルート（`/`）となるように記載する
        - 例：`lib`  の場合は、どの階層にある `lib` ファイルやディレクトリを除外する
    - Python3 実行時に作成されるキャッシュをリポジトリに含めいない
    - `.gitignore` の内容
        - キャッシュと生成されるデータ（個人情報）を除外する

        ```
        __pycache__/
        *.py[cod]
        ```
        - `*.py[cod]`  （正規表現で記載）→ ignore *.pyc or *.pyo or *.pyd

- ブランチの切り替え
    - `git checkout <ブランチ名>`
        - なぜに "checkin" でないのか
        - ホテルの場合のチェックアウト
            - 部屋を出る、会計をする → 清算をして次の行動に移る
    - `git branch`  ブランチ一覧
    - `git status`  今いるブランチ内のやり残しや状態を確認する

## 俺様シェル呼び出しのコマンド群を作ろう

1. GitHub に MyBinCommands リポジトリを作る
2. ローカル（Windows上）に Clone
3. Ubuntu（WSS）上のホームに `~/bin` としてシンボリックリンクを張る
4. bin ディレクトリにパスを通す（echo $PATH で確認）
5. `lsbin` コマンドの作成

### lsbin コマンドの作成

lsbin`  コマンド本体のディレクトリを ls するコマンド

- 実行されたコマンドのディレクトリを取得する and 移動
    - 既知：`pwd`, `cd`
    - 新規：`dirname`
        - 引数のパスから（ファイル名を除いた）ディレクトリのパスが返される
    - よく使われる記法： `$(cd $(dirname $0); pwd)`
        - `$()` → 内部で擬似的／一時的／仮想的に処理
        - `$0`  → スクリプト自分自身のフルパスが返される
        - `PATH_DIR=$(cd $(dirname $0); pwd)`
    - `grep` で除外する
        - `-v`  オプションを使う

## 正規表現（Regular Expression）

- 決められた表現という意味ではない（ある意味そう）
    - 
- 検索や置換などに使われる表記方法（パターンの記述方法）
    - Perl などの記法が有名

## 英語表現と日本語英語の表現と英語ドキュメントを読むコツ

- 単語の意味は一意ではない
    - 複数の意味があるので、全ての訳を見て共通するものを見出すのが大事
    - Regular → レギュラー（日本語英語） として認識するとズレていく
        - 英英辞典や辞書でかならず他の意味も調べること


## 課題

- ブログサイトの立ち上げ（無料で）
    - GitHub Pages でホームページ立ち上げ
    - Freenom で取得したドメインを GitHub Pages を割り当て
        - DNS の知識

