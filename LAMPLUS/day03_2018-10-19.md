20181019 教育内容

20181019

11:00-14:30, 15:00-17:00（5.5h）

# 標準入力と引数

- 標準入力：対話式アプリで利用
	- 対話式とは：
		- `$ 名前を入力してください: ` （入力待ち）

- 引数：コマンド（アプリ）実行時に入力情報を渡す（対話しない）    


# プログラムのお覚え方


- 読経（ソースコードを読む）
    - 関数の使い方、プログラムの組み方、コメントの付け方、など
	- ポイント（教科書、プログラムコード含む）
			1. 目次（全体の流れ、Main）
			2. 索引（使われている関数やクラス）
			3. 本文（実際のソースコード）

- 写経（ソースコードを手入力する）
    - 使い方を体で覚える→文法

- 転経（コピペして読んだことにする）
    - 使い方はよくわからないが、それを使えば動く
        - 早い → 不具合を見つけづらい
	- DRY （Don't Repeat Your self）原則
		- 同じことを繰り返さない

- 乱取り
    - コーディング・パターン、同じことを繰り返して体で覚える


# プログラム開発のスタイル


- TDD （Test Driven Development, テスト駆動型開発）

	- 関数・クラスや機能ごとにテストを用意して、パスするかを自動化する
	    - Unit テスト と呼ばれる
	- この自動化を行うのが CI （Cicle Integration）
		- Jenkins
		- Travis
		- Sider

	- メリット
		- 要件や仕様を明確にすることができる

	- デメリット
		- ２重に開発する必要がある（テストと実態）

- 理想的な開発

	1. 関数/クラスの仕様を決める
	2. 関数/クラスのテストを作る
    	- 仕様を網羅するテストの作成
	3. 関数/クラスの実装をする
	4. テストを実行する（パスするまで 3 に戻る）
	5. 作成した関数／クラスをメインのプログラムに実装する


- ウォーターフォール型開発／アジャイル開発

	- ウォーターフォール型
	    - 最初にキチっと決めて仕様変更がないのが理想
		- メリット：予算が立てやすい
		- デメリット：仕様や設計が甘いと予算オーバーする
		- 上流：仕様／設計／スケジュール決め
		- 中流：テスト開発
		- 下流：実装
	- アジャイル型／PDCA（Plan/Do/Check/Action）
	    - 漠然と決めて、要望にあわせて形にしていく
		- メリット：要望されたぶんだけの予算になる
		- デメリット：全体予算の先が読めない
		- 大まかな仕様／設計／スケジュールを決める
		- PDCA でまわす
			1. 仕様や設計方法を考える
			2. 実装する
			3. 実行する
			4. 改善／問題を検討する（１に戻る）
        - PDCA は元はメーカー用語（ISO 900x, ISO 1400x でも使われる）

# 原則

- DRY （Don't Repeat Your self）の原則
	- 同じことを繰り返さない

- KISS （Keep It Simple Stupid）の原則
	- なるべく機能はシンプルに（引き算せよ）

- YAGNI （You Ain't Gonna Need It） の原則
	- いらなくなる機能は実装するな

- 合理の非合理／非合理の合理
	- 合理的に見えて長い目で見ると非合理的なもの
	- 一見非合理に見えて、長い目で見ると合理的なもの

# 作ってみたいアプリ

- 筋トレ・アプリ

## 筋トレ・アプリの概要

- アプリのコマンド名
	- `train`

- アプリの用途
    - 筋トレのスケジュール管理

- アプリの動き
	- 前回から経過した日数をカウント
	- 経過した日数に応じてコメントを返す
	- 次回の筋トレ日を教える
	- 部位ごとのスケジュール管理
		- 前側、後ろ側、下半身の三種類

- 流れのイメージ
    - より具体的にシミレーション
        - 実際に動かなくてOK（モック）

    - アプリの実行イメージ

    ```sh-session
    $ # 今日の筋トレ済み状態で起動
    $ train --help
    引数が足りません
    usage 部位名 筋トレ日
    部位名
      前側, 下半身, 後ろ側
    筋トレ日
      20xx/xx/xx
    $
    $ train 前側
    前側は10日間筋トレをしていませんでした。がんばってください。
    次回前側は20xx/xx/xxにやりましょう。
    明日は下半身を筋トレしてください
    $ 
    $ train 前側 20xx/xx/xx
    前側は8日間筋トレをしていませんでした。がんばってください。
    次回前側は20xx/xx/xxにやりましょう。
    明日は下半身を筋トレしてください
    ```

    ```sh-session
    $ # 初めての起動
    $ train
    引数が不正です
    usage 部位名 筋トレ日
    部位名
      前側, 下半身, 後ろ側
    筋トレ日
      20xx/xx/xx
    $
    $ train 前側
    筋トレ天国スタート！頑張っていきましょう。
    明日下半身を鍛えてください。
    $
    $ train 20xx/xx/xx
    引数が不正です
    usage 部位名 筋トレ日
    部位名
      前側, 下半身, 後ろ側
    筋トレ日
      20xx/xx/xx
    $ # 同じヘルプ表示関数が使える→シンプル
    $ 
    $ train 下半身 20xx/xx/xx
    初回筋トレ予定を登録しました。
    20xx/xx/xx に下半身を鍛えてください。
    ```

    ```sh-session
    $ # 昨日（20xx/xx/xx）前側をやって、今日（20xx/xx/yy）前側をやった場合
    $ train 前側
    前回20xx/xx/xxに前側をやっています。間隔を空けてあまり無理しないでいきましょう。
    明日下半身を鍛えてください。
    $
    $ train 前側 20xx/xx/yy
    前回20xx/xx/xxに前側をやっています。間隔を空けてあまり無理しないでいきましょう。
    明日下半身を鍛えてください。
    $ # 内部処理
    $ # if 今日の日付 == 20xx/xx/yy
    $ #    日付 = 今日の日付
    ```

    ```sh-session
    $ # 前側, 下半身, 後ろ側,休日の四日間ループが4回続いた場合
    $ train 前側 20xx/xx/yy
    いいペースですね！体に異常がなければこのままのペースでいきましょう。
    明日20xx/xx/yyは下半身を鍛えてください。
    
    $ # 次回筋トレ日と部位を忘れてしまった場合
    $ train 確認
    20xx/xx/xx に上半身を鍛えてください。
    ```

    - 記憶（記録）するのは各部位の前回の日付のみ
    - 連続筋トレを記憶 4 x 4 に追加、部位の順番が異なった場合はリセット
    
    	- [前側, 下半身, 後ろ側, 休日], [前側, 下半身, 後ろ側, 休日], [前側, 下半身, 後ろ側, 休日], [前側, 下半身, 後ろ側, 休日]
    
    		- フラグ： [1,2,3,0], [1,2,3,0], [1,2,3,0], [1,2,3,0]
    	- 前側, 下半身, 後ろ側, 休日, 休日　→ リセット （1,2,3,0,0）
    	- 前側, 休日 → リセット（1,0）
    	- 前側, 後ろ側 → 順番違いは継続（1,3）
    	- 前側, 前側 → リセット （1,1）
    - 部位の順番は「前側, 下半身, 後ろ側, 休日」をループ

- フロー図とは

    - ユーザーから見える流れ
    - アプリ起動、引数受け取りなど内部的な流れ


# シェルコマンド

- `grep` 文字列抽出コマンド
- `sed`文字列 置換コマンド
- `touch` 空のファイルを作るコマンド

# データの保存方法

	1. DB を使うパターン

		1. MySQL → 企業向け、別途サーバーが必要
		2. PostgreSQL → 企業向け、別途サーバーが必要
		3. Firebase → オンラインのDB、別途アカウントが必要
		4. SQLite3 → DB がファイルなのでシングルユーザー向け

	2. ファイルに出力するパターン

		1. CSV
		2. JSON　→ 今回はこれが良いと思う
		3. 独自フォーマット

# 次回までの課題

- `train.py` の（コメントによる）フローの概要を仕上げる





